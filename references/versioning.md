# 版本号管理规范

## 语义化版本号 (SemVer)

版本号格式：`主版本.次版本.修订号`

```
MAJOR.MINOR.PATCH
1.0.0
```

| 版本类型 | 何时 increment | 示例 |
|---------|---------------|------|
| **MAJOR** | 破坏性变更 | 2.0.0 |
| **MINOR** | 新增功能（向下兼容） | 1.1.0 |
| **PATCH** | 修复 bug（向下兼容） | 1.0.1 |

## 常见版本号规则

### 1. 产品版本

| 版本 | 命名 | 适用场景 |
|------|------|---------|
| 预览版 | alpha | 内部测试 |
| 测试版 | beta | 外部测试 |
| 正式版 | release / GA | 正式发布 |

### 2. 版本号后缀

| 后缀 | 含义 | 示例 |
|------|------|------|
| `-beta.1` | 测试版 | 1.0.0-beta.1 |
| `-rc.1` | 发布候选 | 1.0.0-rc.1 |
| `-dev` | 开发版 | 1.0.0-dev |

## 版本规划策略

### 1. 固定周期发布

```
Q1: v1.1.0 -> v1.2.0
Q2: v1.3.0 -> v1.4.0
Q3: v2.0.0 (大版本)
Q4: v2.1.0 -> v2.2.0
```

### 2. 版本冻结期

- 发布前 2 周进入冻结期
- 只允许 bug 修复
- 禁止新功能合并

### 3. 向下兼容判断

| 变更类型 | 是否兼容 |
|---------|---------|
| 新增 API | ✅ 兼容 |
| 新增可选参数 | ✅ 兼容 |
| 修改参数名称 | ❌ 不兼容 |
| 删除 API | ❌ 不兼容 |
| 修改返回值 | ❌ 不兼容 |
| 修改错误码 | ❌ 不兼容 |

## 变更日志规范

### 格式

```markdown
## [版本号] - 日期

### 新增
- 功能 A：描述

### 修复
- 问题 B：描述

### 变更
- 功能 C：变更描述

### 废弃
- 功能 D：废弃说明
```

### 示例

```markdown
## [1.2.0] - 2026-03-01

### 新增
- 用户画像功能：支持创建和管理用户画像
- 比赛分享功能：支持微信分享比赛

### 修复
- 修复登录超时问题
- 修复列表分页错误

### 变更
- 优化加载性能：首页加载时间从 2s 优化到 0.5s
```

## 分支策略

```
main (正式环境)
├── release/v1.2.0 (发布分支)
├── develop (测试环境)
│   └── feature/xxx (功能分支)
└── hotfix/xxx (热修复分支)
```

## 版本命名示例

| 产品阶段 | 版本号 | 说明 |
|---------|-------|------|
| MVP | v0.9.0 | 最小可行产品 |
| 初期 | v0.9.5 | 持续迭代 |
| 正式 | v1.0.0 GA | 首次正式发布 |
| 优化 | v1.1.0 | 小幅优化 |
| 大版本 | v2.0.0 | 重大改版 |
